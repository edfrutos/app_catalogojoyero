<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Editar Registro</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" />
  </head>
  <body>
    <div class="container">
      {% if session.usuario %}
      <div style="float: right">
        <button type="button" onclick="window.location.href='/logout'" class="btn-secondary">
          Cerrar Sesión ({{ session.usuario }})
        </button>
      </div>
      {% endif %}
      <h1>Editar el registro #{{ registro.numero }}</h1>

      {% if error_message %}
      <p style="color: red; font-weight: bold">{{ error_message }}</p>
      {% endif %}

      <form method="POST" enctype="multipart/form-data">
        <p>
          <label>Número (no editable):</label>
          <input type="text" value="{{ registro.numero }}" readonly />
        </p>
        <p>
          <label>Descripción:</label>
          <input type="text" name="descripcion" value="{{ registro.descripcion }}" required />
        </p>
        <p>
          <label>Peso (gr):</label>
          <input type="number" step="any" name="peso" value="{{ registro.peso }}" required />
        </p>
        <p>
          <label>Valor:</label>
          <input type="number" step="any" name="valor" value="{{ registro.valor }}" required />
        </p>
        <hr />
        <h3>Actualizar / Eliminar Imágenes</h3>
        <p>
          <label>Subir hasta 3 imágenes:</label><br />
          <input type="file" name="imagenes" multiple accept="image/*" class="btn-secondary" />
        </p>
        <p>
          <h3>Eliminar imágenes existentes:</h3>
          <label><input type="checkbox" name="remove_img1" /> Eliminar Imagen 1</label>
          <label><input type="checkbox" name="remove_img2" /> Eliminar Imagen 2</label>
          <label><input type="checkbox" name="remove_img3" /> Eliminar Imagen 3</label>
        </p>
        <hr />
        <h3>Eliminar este registro completo</h3>
        <p>
          <label>
            <input type="checkbox" name="delete_record" />
            Eliminar fila por completo
          </label>
        </p>
        <button type="submit" class="btn-secondary">Guardar</button>
        <button type="button" onclick="window.location.href='/catalog'" class="btn-secondary">Cancelar</button>
      </form>
    </div>
  </body>
</html>
